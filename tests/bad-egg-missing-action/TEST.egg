option auto = false;
option version = 0.0.1;
option k = 1;

inh source : SourceUnit for S;
syn val : Integer for V, U;

space  separateur  is    "[\n\r\t ]+" ;
sugar  paro        is    "\(" ;
sugar  parf        is    "\)" ;
sugar  plus        is    "\+" ;
sugar  moins       is    "\-" ;
sugar  fois        is    "\*" ;
sugar  divise      is    "\/" ;
term   entier      is    "[0-9]+" ;

S -> V #a ;
#a {
    write("resultat : " + V^val + "\n");
}

V -> entier #a ;
#a {
    Integer i = new Integer(0);
    -- hack, on ne peut pas utiliser de mÃ©thodes statiques..
    V^val = i.parseInt(entier^txt);
}

V -> paro U #a ;
#a {
    V^val = U^val;
}

U -> plus V V parf #a ;
